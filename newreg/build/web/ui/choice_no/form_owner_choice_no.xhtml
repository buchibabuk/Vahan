<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"           
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <div class="ui-grid ui-grid-responsive">
        <p:panel id ="owner_panel_id" header="Owner Choice Number" styleClass="top-space bottom-space">
            <div class="ui-grid-row">
                <div class="ui-grid-col-12"> 
                    <h:outputText styleClass="red font-bold" value="Note: Choice no fee shown above will be paid by vehicle owner at the time of payment." rendered="#{choiceNoBean.vehicleRegnGenType eq 'P'}"/>
                    <h:outputText styleClass="red font-bold" value="Note: Registration Mark will be generated by the system from the series." rendered="#{choiceNoBean.vehicleRegnGenType eq 'F'}"/>
                </div>
            </div>
            <p:outputPanel id="selection_panel_id" >
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4 resp-blank-height"></div>
                    <div class="ui-grid-col-4">
                        <label class="field-label resp-label-section">
                            <p:outputLabel for="choice_select_id" value="Registration Mark will be generated as"/>
                        </label>
                        <p:selectOneMenu id="choice_select_id" value="#{choiceNoBean.vehicleRegnGenType}"  disabled="#{choiceNoBean.renderClearChoiceNo}"
                                         filter="true" required="true" requiredMessage="Please select the Registration Mark generation type.">
                            <f:selectItem itemLabel="---Select Option---" itemValue="-1"/>
                            <f:selectItem itemLabel="System Generated (Free)" itemValue="F"/>
                            <f:selectItem itemLabel="Choice Number (Paid)" itemValue="P"/>
                            <f:validator validatorId="selectOneValidator" for="choice_select_id"/>
                            <p:ajax process="@this" update="workbench_tabview:owner_panel_id" onstart="PF('bui').show();" oncomplete="PF('bui').hide()"  listener="#{choiceNoBean.choiceSelectionActionListener()}" />
                        </p:selectOneMenu>
                    </div>
                </div>
            </p:outputPanel>
            <p:outputPanel id="selection_choice_panel_id" rendered="#{choiceNoBean.renderChoiceNopanel}" >
                <div class="ui-grid-row bottom-space">
                    <div class="ui-grid-col-3 resp-blank-height"></div>
                    <div class="ui-grid-col-2">
                        <label class="field-label resp-label-section">
                            <p:outputLabel for="prefix_id" value="Prefix No."/>
                        </label>
                        <p:inputText id="prefix_id" value="#{choiceNoBean.prefixRegnSeries}" readonly="true"/>
                    </div>
                    <div class="ui-grid-col-2">
                        <label class="field-label resp-label-section">
                            <p:outputLabel for="choice_no_id" value="Choice No."/>
                        </label>
                        <p:inputText id="choice_no_id" placeholder="Enter Choice number" value="#{choiceNoBean.sufixRegnNo}" readonly="#{choiceNoBean.renderClearChoiceNo}" maxlength="4" autocomplete="off" >
                            <p:ajax update="@this" process="@this" />
                            <p:keyFilter mask="pint" for="choice_no_id"/>
                        </p:inputText>
                    </div>
                    <c:if test="#{choiceNoBean.renderClearChoiceNo}" >
                        <div class="ui-grid-col-2">
                            <label class="field-label resp-label-section">
                                <p:outputLabel for="choice_no_amount_id" value="Amount."/>
                            </label>
                            <p:inputText id="choice_no_amount_id" value="#{choiceNoBean.regnChoiceAmount}" readonly="true" />                    
                        </div>
                    </c:if> 

                    <div class="ui-grid-col-2" style="margin-top: 17px !important;">
                        <p:commandButton value="Clear Choice No" update="workbench_tabview:owner_panel_id" onclick="PF('bui').show();" oncomplete="PF('bui').hide()" actionListener="#{choiceNoBean.clearChoiceNumber()}" rendered="#{choiceNoBean.renderClearChoiceNo}">
                            <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />
                        </p:commandButton>
                        <p:commandButton value="Check Availability" update="workbench_tabview:owner_panel_id workbench_tabview:op_show_msg_panel" onclick="PF('bui').show();" oncomplete="PF('bui').hide()" actionListener="#{choiceNoBean.validateSelectedChoiceNo('')}" rendered="#{!choiceNoBean.renderClearChoiceNo}" styleClass="top-space" />                       
                    </div>
                </div>

            </p:outputPanel>
            <style>

                .choice-number-color-section {
                    width:30px; 
                    height: 20px; 
                    border-radius: 5px;
                }
                .choice-number-available {
                    background: #008001 !important;
                    /*border: 2px solid #003e01;*/
                }

                .choice-number-used-registration {
                    background: #ff0000 !important;
                    /*border:2px solid #a00303;*/
                }


                .choice-number-available .ui-widget-content,
                .choice-number-used-registration .ui-widget-content {
                    color: #FFFFFF !important;
                    display: table-row-group;
                    font-size: 20px
                }

                .nospace {
                    margin: 0px !important
                }
                ul.ui-datalist-data {
                    margin: 0 auto;
                    padding: 0px;
                    width: 98%;
                }

                li.ui-datalist-item  {
                    width: 72px;
                    float: left;
                    /*display: inline-block;*/
                }

                li.ui-datalist-item a {
                    display: block;
                    font-weight: bold;
                    padding: 5px 10px;
                    text-align: center;
                    border: 1px solid #999d9e !important;
                }

                li.ui-datalist-item a {
                    color: #FFFFFF !important;
                    text-decoration: underline;
                }

                li.ui-datalist-item a:hover {
                    text-decoration: none;
                }

            </style>
            <p:outputPanel id="available_no" rendered="#{choiceNoBean.regnList ne null and choiceNoBean.regnList.size() > 0}">  
                <div class="clearfix" style="background: #FFFFFF!important; border: 1px solid #1682BA!important">
                    <p:dataList var="regnSeries"  value="#{choiceNoBean.regnList}" styleClass="datatable-panel-100"  
                                rows="200" paginator="true" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" paginatorPosition="top" pageLinks="5">
                        <f:facet name="header">
                            <div class="clearfix">
                                <div class="left-position float-left">
                                    <div class="inline-section">
                                        <div class="inline-section choice-number-color-section choice-number-available">&#160;</div>
                                        <div class="inline-section"> Available </div>                                    
                                    </div>
                                    <div class="inline-section left-space">
                                        <div class="inline-section choice-number-color-section choice-number-used-registration">&#160;</div>
                                        <div class="inline-section"> Not Available </div>
                                    </div>
                                </div>
                                <div class="right-position float-right">
                                    <p:commandButton icon="ui-icon-refresh" onclick="PF('bui').show();" oncomplete="PF('bui').hide()" immediate="true" value="Refresh" action="#{choiceNoBean.choiceAvailableNumbers()}" update="workbench_tabview:available_no"  styleClass="nospace" />
                                </div>
                            </div>
                        </f:facet>
                        <p:commandLink value="#{regnSeries.sufixRegnNo}" update="workbench_tabview:selection_choice_panel_id" immediate="true" onclick="PF('bui').show();" oncomplete="PF('bui').hide()" action="#{choiceNoBean.validateSelectedChoiceNo(regnSeries.sufixRegnNo)}"  styleClass="#{regnSeries.regnColorCode}"/>
                    </p:dataList>
                </div>
            </p:outputPanel>


            <p:outputLabel id="op_show_panel_success" >
                <p:dialog widgetVar="successDlgChoiceVar" closable="false" modal="true" resizable="false" draggable="false" header="Confirmation !!!" visible="#{choiceNoBean.renderSuccessChoiceDialog}">
                    <div class="center-position">
                        <p:outputLabel escape="false" value="#{choiceNoBean.choiceRegnNoMsg}."/>
                        <p:button value="Ok" outcome="workbench?faces-redirect=true" icon="ui-icon-check"/>
                    </div>
                </p:dialog>
            </p:outputLabel>

            <p:outputLabel id="op_show_msg_panel" >
                <p:dialog id="confirmDlg_ID" widgetVar="msgDlgChoiceVar" resizable="false"
                          draggable="false" closable="false" hideEffect="explode" modal="true" header="Confirmation !!!">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-12 font-bold font-white choice-number-available" style="padding: 10px; ">
                            <h:outputLabel value="#{choiceNoBean.choiceRegnNoMsg}" escape="false"/>
                        </div>
                    </div>
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-12 center-position top-space">                            
                            <p:commandButton value="Close" id="cancel_id" onclick="PF('msgDlgChoiceVar').hide();"
                                             styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                            <p:commandButton value="Book Registration Mark" update="workbench_tabview:owner_panel_id" onclick="PF('bui').show();" oncomplete="PF('bui').hide()" actionListener="#{choiceNoBean.bookRegistrationMark()}" rendered="#{choiceNoBean.renderBookedChoiceNoBtn}">
                                <p:confirm header="Confirmation" message="Are you sure to confirm the Booking?" icon="ui-icon-alert" />
                            </p:commandButton>                            
                        </div>
                    </div>
                </p:dialog>
            </p:outputLabel>

            <p:blockUI block="masterLayout" widgetVar="bui">
                <p:graphicImage name="#{imageName.ajaxLoader}" library="images" height="40%" width="30%"/>
            </p:blockUI>

        </p:panel>
    </div>
</html>